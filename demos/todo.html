<var name="state" value='{"todos":[]}' mutable="true"></var>

<div id="todoApp">
  <form id="todoForm">
    <input type="text" id="newTodo" placeholder="Enter new todo" />
    <button type="submit">Add</button>
  </form>
  <ul id="todoList"></ul>
</div>

<submit target="#todoForm">
  <push array="state.todos" value="document.getElementById('newTodo').value"></push>
  <setprop selector="#newTodo" prop="value" value="''"></setprop>
  <call function="render"></call>
</submit>

<function name="render">
  <keyedlist target="#todoList" of="state.todos" item="t" index="i" key="t">
    <li>
      <span>{t}</span>
      <button class="rm">âœ•</button>
      <event target=".rm" type="click">
        <splice array="state.todos" index="i" delete="1"></splice>
        <call function="render"></call>
      </event>
    </li>
  </keyedlist>
</function>

<call function="render"></call>
